{% set reddit = salt.grains.filter_by({
    'default': {
        'pkgs': [
            'netcat-openbsd',
            'git-core',
            'python-dev',
            'python-setuptools',
            'python-routes',
            'python-pylons',
            'python-boto',
            'python-tz',
            'python-crypto',
            'python-babel',
            'python-numpy',
            'python-dateutil',
            'cython',
            'python-sqlalchemy',
            'python-beautifulsoup',
            'python-chardet',
            'python-psycopg2',
            'python-pycassa',
            'python-imaging',
            'python-pycaptcha',
            'python-pylibmc=1.2.2-1~trusty5',
            'python-amqplib',
            'python-bcrypt',
            'python-snappy',
            'python-snudown',
            'python-l2cs',
            'python-lxml',
            'python-kazoo',
            'python-stripe',
            'python-tinycss2',
            'python-unidecode',
            'python-mock',
            'python-yaml',
            'python-httpagentparser',
            'python-baseplate',
            'python-flask',
            'geoip-bin',
            'geoip-database',
            'python-geoip',
            'nodejs',
            'node-less',
            'node-uglify',
            'gettext',
            'make',
            'optipng',
            'jpegoptim',
            'libpcre3-dev',
            'python-gevent',
            'python-gevent-websocket',
            'python-haigha',
            'python-redis',
            'python-pyramid',
            'python-raven'
        ],
        'service': 'reddit',
        'queue_config_count': {
            'search_q': 0,
            'del_account_q': 1,
            'scraper_q': 1,
            'markread_q': 1,
            'commentstree_q': 1,
            'newcomments_q': 1,
            'vote_link_q': 1,
            'vote_comment_q': 1,
            'automoderator_q': 0,
            'butler_q': 1,
            'author_query_q': 1,
            'subreddit_query_q': 1,
            'domain_query_q': 1
        },
        'mcrouter_config': {
            "pools": {
                "default": {
                    "servers": [
                        "memcached.service.consul:11211",
                    ],
                    "protocol": "ascii",
                    "keep_routing_prefix": false,
                },
            },
            "named_handles": [
                {
                    "name": "default-pool",
                    "type": "PoolRoute",
                    "pool": "default",
                },
            ],
            "route": {
                "type": "PrefixSelectorRoute",
                "policies": {
                    "rend:": "default-pool",
                    "page:": "default-pool",
                    "pane:": "default-pool",
                    "sr:": "default-pool",
                    "account:": "default-pool",
                    "link:": "default-pool",
                    "comment:": "default-pool",
                    "message:": "default-pool",
                    "campaign:": "default-pool",
                    "award:": "default-pool",
                    "trophy:": "default-pool",
                    "flair:": "default-pool",
                    "friend:": "default-pool",
                    "inboxcomment:": "default-pool",
                    "inboxmessage:": "default-pool",
                    "reportlink:": "default-pool",
                    "reportcomment:": "default-pool",
                    "reportsr:": "default-pool",
                    "reportmessage:": "default-pool",
                    "modinbox:": "default-pool",
                    "otp:": "default-pool",
                    "captcha:": "default-pool",
                    "queuedvote:": "default-pool",
                    "geoip:": "default-pool",
                    "geopromo:": "default-pool",
                    "srpromos:": "default-pool",
                    "rising:": "default-pool",
                    "srid:": "default-pool",
                    "defaultsrs:": "default-pool",
                    "featuredsrs:": "default-pool",
                    "query:": "default-pool",
                    "rel:": "default-pool",
                    "srmember:": "default-pool",
                    "srmemberrel:": "default-pool",
                },
                "wildcard": {
                    "type": "PoolRoute",
                    "pool": "default",
                }
            }
        }
    },
    'Debian': {
    },
    'RedHat': {
    },
}, grain='os_family', merge=salt.pillar.get('reddit:overrides'), base='default') %}
